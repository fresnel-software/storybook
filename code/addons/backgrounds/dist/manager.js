var P=Object.create;var A=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var O=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of v(r))!F.call(t,o)&&o!==e&&A(t,o,{get:()=>r[o],enumerable:!(n=_(r,o))||n.enumerable});return t};var c=(t,r,e)=>(e=t!=null?P(H(t)):{},O(r||!t||!t.__esModule?A(e,"default",{value:t,enumerable:!0}):e,t));var d=c(require("react")),g=require("@storybook/addons");var u="storybook/background",s="backgrounds";var R={UPDATE:`${u}/update`};var i=c(require("react")),y=c(require("memoizerific")),p=require("@storybook/api"),G=require("@storybook/client-logger"),l=require("@storybook/components");var C=require("@storybook/theming"),E=C.styled.span(({background:t})=>({borderRadius:"1rem",display:"block",height:"1rem",width:"1rem",background:t}),({theme:t})=>({boxShadow:`${t.appBorderColor} 0 0 0 1px inset`}));var M=c(require("global")),S=require("ts-dedent"),I=require("@storybook/client-logger"),{document:U,window:j}=M.default;var T=(t,r=[],e)=>{if(t==="transparent")return"transparent";if(r.find(o=>o.value===t))return t;let n=r.find(o=>o.name===e);if(n)return n.value;if(e){let o=r.map(a=>a.name).join(", ");I.logger.warn(S.dedent`
        Backgrounds Addon: could not find the default color "${e}".
        These are the available colors for your story based on your configuration:
        ${o}.
      `)}return"transparent"};var x=(0,y.default)(1e3)((t,r,e,n,o,a)=>({id:t||r,title:r,onClick:()=>{o({selected:e,name:r})},value:e,right:n?i.default.createElement(E,{background:e}):void 0,active:a})),K=(0,y.default)(10)((t,r,e)=>{let n=t.map(({name:o,value:a})=>x(null,o,a,!0,e,a===r));return r!=="transparent"?[x("reset","Clear background","transparent",null,e,!1),...n]:n}),N={default:null,disable:!0,values:[]},L=(0,i.memo)(()=>{var B;let t=(0,p.useParameter)(s,N),[r,e]=(0,p.useGlobals)(),n=(B=r[s])==null?void 0:B.value,o=(0,i.useMemo)(()=>T(n,t.values,t.default),[t,n]);Array.isArray(t)&&G.logger.warn("Addon Backgrounds api has changed in Storybook 6.0. Please refer to the migration guide: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md");let a=(0,i.useCallback)(b=>{e({[s]:{...r[s],value:b}})},[t,r,e]);return t.disable?null:i.default.createElement(i.Fragment,null,i.default.createElement(l.WithTooltip,{placement:"top",trigger:"click",closeOnClick:!0,tooltip:({onHide:b})=>i.default.createElement(l.TooltipLinkList,{links:K(t.values,o,({selected:h})=>{o!==h&&a(h),b()})})},i.default.createElement(l.IconButton,{key:"background",title:"Change the background of the preview",active:o!=="transparent"},i.default.createElement(l.Icons,{icon:"photo"}))))});var m=c(require("react")),f=require("@storybook/api"),k=require("@storybook/components");var D=(0,m.memo)(()=>{var o;let[t,r]=(0,f.useGlobals)(),{grid:e}=(0,f.useParameter)(s,{grid:{disable:!1}});if(e!=null&&e.disable)return null;let n=((o=t[s])==null?void 0:o.grid)||!1;return m.default.createElement(k.IconButton,{key:"background",active:n,title:"Apply a grid to the preview",onClick:()=>r({[s]:{...t[s],grid:!n}})},m.default.createElement(k.Icons,{icon:"grid"}))});g.addons.register(u,()=>{g.addons.add(u,{title:"Backgrounds",type:g.types.TOOL,match:({viewMode:t})=>!!(t&&t.match(/^(story|docs)$/)),render:()=>d.default.createElement(d.Fragment,null,d.default.createElement(L,null),d.default.createElement(D,null))})});
