import T from"global";import{dedent as b}from"ts-dedent";import{simulatePageLoad as L,simulateDOMContentLoaded as A}from"@storybook/preview-web";var{fetch:F,Node:H}=T,x=async(e,o,t,r)=>{let s=new URL(`${e}/${o}`);return s.search=new URLSearchParams({...r.globals,...t}).toString(),(await F(s)).text()},C=(e,o)=>{let t={...e};return Object.keys(o).forEach(r=>{let s=o[r],{control:n}=s,p=n&&n.type.toLowerCase(),i=t[r];switch(p){case"date":t[r]=new Date(i).toISOString();break;case"object":t[r]=JSON.stringify(i);break;default:}}),t},v=e=>{};async function R({id:e,title:o,name:t,showMain:r,showError:s,forceRemount:n,storyFn:p,storyContext:i,storyContext:{parameters:y,args:f,argTypes:l}},a){p();let d=C(f,l),{server:{url:g,id:m,fetchStoryHtml:h=x,params:u}}=y,S=m||e,w={...u,...d},c=await h(g,S,w,i);if(r(),typeof c=="string")a.innerHTML=c,L(a);else if(c instanceof H){if(a.firstChild===c&&n===!1)return;a.innerHTML="",a.appendChild(c),A()}else s({title:`Expecting an HTML snippet or DOM node from the story: "${t}" of "${o}".`,description:b`
        Did you forget to return the HTML snippet from the story?
        Use "() => <your snippet or node>" or when defining the story.
      `})}export{v as a,R as b};
