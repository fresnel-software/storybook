import{c as n,d as P,e as G,f as Z,g as x,h as V}from"./chunk-M5RWOKLV.mjs";n();V();import q from"react";import{addons as Q,types as xe}from"@storybook/addons";n();import d,{useState as Te}from"react";import{Global as ke,styled as N}from"@storybook/theming";import{Icons as Ie,IconButton as Se,WithTooltip as Ee,TooltipLinkList as ve}from"@storybook/components";n();import*as s from"react";var ee=e=>s.createElement("svg",{...e},s.createElement("defs",null,s.createElement("filter",{id:"protanopia"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.567, 0.433, 0, 0, 0 0.558, 0.442, 0, 0, 0 0, 0.242, 0.758, 0, 0 0, 0, 0, 1, 0"})),s.createElement("filter",{id:"protanomaly"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.817, 0.183, 0, 0, 0 0.333, 0.667, 0, 0, 0 0, 0.125, 0.875, 0, 0 0, 0, 0, 1, 0"})),s.createElement("filter",{id:"deuteranopia"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.625, 0.375, 0, 0, 0 0.7, 0.3, 0, 0, 0 0, 0.3, 0.7, 0, 0 0, 0, 0, 1, 0"})),s.createElement("filter",{id:"deuteranomaly"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.8, 0.2, 0, 0, 0 0.258, 0.742, 0, 0, 0 0, 0.142, 0.858, 0, 0 0, 0, 0, 1, 0"})),s.createElement("filter",{id:"tritanopia"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.95, 0.05,  0, 0, 0 0,  0.433, 0.567, 0, 0 0,  0.475, 0.525, 0, 0 0,  0, 0, 1, 0"})),s.createElement("filter",{id:"tritanomaly"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.967, 0.033, 0, 0, 0 0, 0.733, 0.267, 0, 0 0, 0.183, 0.817, 0, 0 0, 0, 0, 1, 0"})),s.createElement("filter",{id:"achromatopsia"},s.createElement("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"0.299, 0.587, 0.114, 0, 0 0.299, 0.587, 0.114, 0, 0 0.299, 0.587, 0.114, 0, 0 0, 0, 0, 1, 0"}))));var Re="storybook-preview-iframe",Ae=[{name:"blurred vision",percentage:22.9},{name:"deuteranomaly",percentage:2.7},{name:"deuteranopia",percentage:.56},{name:"protanomaly",percentage:.66},{name:"protanopia",percentage:.59},{name:"tritanomaly",percentage:.01},{name:"tritanopia",percentage:.016},{name:"achromatopsia",percentage:1e-4},{name:"grayscale"}],te=e=>e?e==="blurred vision"?"blur(2px)":e==="grayscale"?"grayscale(100%)":`url('#${e}')`:"none",Be=N.div(()=>({"&, & svg":{position:"absolute",width:0,height:0}})),Pe=N.span({background:"linear-gradient(to right, #F44336, #FF9800, #FFEB3B, #8BC34A, #2196F3, #9C27B0)",borderRadius:"1rem",display:"block",height:"1rem",width:"1rem"},({filter:e})=>({filter:te(e)}),({theme:e})=>({boxShadow:`${e.appBorderColor} 0 0 0 1px inset`})),Ne=N.span({display:"flex",flexDirection:"column"}),He=N.span({textTransform:"capitalize"}),Fe=N.span(({theme:e})=>({fontSize:11,color:e.textMutedColor})),Le=(e,t)=>[...e!==null?[{id:"reset",title:"Reset color filter",onClick:()=>{t(null)},right:void 0,active:!1}]:[],...Ae.map(o=>{let r=o.percentage!==void 0?`${o.percentage}% of users`:void 0;return{id:o.name,title:d.createElement(Ne,null,d.createElement(He,null,o.name),r&&d.createElement(Fe,null,r)),onClick:()=>{t(o)},right:d.createElement(Pe,{filter:o.name}),active:e===o}})],oe=()=>{let[e,t]=Te(null);return d.createElement(d.Fragment,null,e&&d.createElement(ke,{styles:{[`#${Re}`]:{filter:te(e.name)}}}),d.createElement(Ee,{placement:"top",trigger:"click",tooltip:({onHide:o})=>{let r=Le(e,l=>{t(l),o()});return d.createElement(ve,{links:r})},closeOnClick:!0,onDoubleClick:()=>t(null)},d.createElement(Se,{key:"filter",active:!!e,title:"Vision simulator"},d.createElement(Ie,{icon:"accessibility"}))),d.createElement(Be,null,d.createElement(ee,null)))};n();import i,{useCallback as J,useMemo as X,useState as St}from"react";import{styled as v}from"@storybook/theming";import{ActionBar as he,Icons as Et,ScrollArea as vt}from"@storybook/components";import{useChannel as Rt,useParameter as At,useStorybookState as Bt}from"@storybook/api";n();import j,{Fragment as ut}from"react";import{Placeholder as ft}from"@storybook/components";n();import h,{Fragment as ge,useState as at}from"react";import{styled as M}from"@storybook/theming";import{Icons as pt}from"@storybook/components";n();import z from"react";import{styled as U}from"@storybook/theming";var Me=U.div({padding:12,marginBottom:10}),we=U.p({margin:"0 0 12px"}),De=U.a({marginTop:12,textDecoration:"underline",color:"inherit",display:"block"}),re=({item:e})=>z.createElement(Me,null,z.createElement(we,null,e.description),z.createElement(De,{href:e.helpUrl,target:"_blank"},"More info..."));n();import C from"react";import{styled as Y}from"@storybook/theming";n();import k from"react";import{styled as L}from"@storybook/theming";import{Badge as Oe}from"@storybook/components";import{SizeMe as We}from"react-sizeme";var $e=L.div({display:"flex",flexDirection:"column",paddingBottom:4,paddingRight:4,paddingTop:4,fontWeight:400}),Ge=L.div(({elementWidth:e})=>({flexDirection:e>407?"row":"inherit",marginBottom:e>407?6:12,display:e>407?"flex":"block"})),Ve=L(Oe)({padding:"2px 8px",marginBottom:3,minWidth:65,maxWidth:"fit-content",width:"100%",textAlign:"center"}),ze=L.div({paddingLeft:6,paddingRight:23});var Ue=e=>e.charAt(0).toUpperCase().concat(e.slice(1)),Ke=({rule:e})=>{let t=null;switch(e.impact){case"critical":t="critical";break;case"serious":t="negative";break;case"moderate":t="warning";break;case"minor":t="neutral";break;default:break}return k.createElement(We,{refreshMode:"debounce"},({size:o})=>k.createElement(Ge,{elementWidth:o.width||0},k.createElement(Ve,{status:t},Ue(e.impact)),k.createElement(ze,null,e.message)))},ie=({rules:e})=>k.createElement($e,null,e.map((t,o)=>k.createElement(Ke,{rule:t,key:o})));n();import H from"react";import{styled as Ze}from"@storybook/theming";n();V();import*as a from"react";import{themes as K,convert as _}from"@storybook/theming";import{useChannel as _e,useAddonState as Ye,useStorybookApi as je}from"@storybook/api";import{STORY_CHANGED as Je,STORY_RENDERED as Xe}from"@storybook/core-events";import{HIGHLIGHT as qe}from"@storybook/addon-highlight";var Qe=[_(K.light).color.negative,_(K.light).color.positive,_(K.light).color.warning],le=a.createContext({results:{passes:[],incomplete:[],violations:[]},setResults:()=>{},highlighted:[],toggleHighlight:()=>{},clearHighlights:()=>{},tab:0,setTab:()=>{}}),ne={passes:[],incomplete:[],violations:[]},se=({active:e,...t})=>{let[o,r]=Ye(P,ne),[l,p]=a.useState(0),[m,y]=a.useState([]),R=je().getCurrentStoryData(),O=a.useCallback((c,B)=>{y(T=>B?[...T,...c]:T.filter(Ce=>!c.includes(Ce)))},[]),F=c=>{A(x.REQUEST,c)},b=a.useCallback(()=>y([]),[]),W=a.useCallback(c=>{b(),p(c)},[]),$=a.useCallback(()=>{p(0),r(ne)},[]),A=_e({[Xe]:F,[Je]:$});return a.useEffect(()=>{A(qe,{elements:m,color:Qe[l]})},[m,l]),a.useEffect(()=>{e&&R?.type==="story"?F(R.id):b()},[e,b,A,R]),e?a.createElement(le.Provider,{value:{results:o,setResults:r,highlighted:m,toggleHighlight:O,clearHighlights:b,tab:l,setTab:W},...t}):null},I=()=>a.useContext(le);var et=Ze.input(({disabled:e})=>({cursor:e?"not-allowed":"pointer"}));function ae(e,t){let o=e.filter(r=>t.includes(r.target[0])).length;return o===0?1:o===e.length?0:2}var tt=({toggleId:e,elementsToHighlight:t=[]})=>{let{toggleHighlight:o,highlighted:r}=I(),l=H.useRef(null),[p,m]=H.useState(ae(t,r));H.useEffect(()=>{let u=ae(t,r);l.current&&(l.current.indeterminate=u===2),m(u)},[t,r]);let y=H.useCallback(()=>{o(t.map(u=>u.target[0]),p!==0)},[t,p,o]);return H.createElement(et,{ref:l,id:e,type:"checkbox","aria-label":"Highlight result",disabled:!t.length,onChange:y,checked:p===0})},S=tt;var ot=Y.li({fontWeight:600}),rt=Y.span(({theme:e})=>({borderBottom:`1px solid ${e.appBorderColor}`,width:"100%",display:"flex",paddingBottom:6,marginBottom:6,justifyContent:"space-between"})),it=Y.span({fontWeight:"normal",alignSelf:"center",paddingRight:15,input:{margin:0,display:"block"}}),nt=({element:e,type:t})=>{let{any:o,all:r,none:l}=e,p=[...o,...r,...l],m=`${t}-${e.target[0]}`;return C.createElement(ot,null,C.createElement(rt,null,e.target[0],C.createElement(it,null,C.createElement(S,{toggleId:m,elementsToHighlight:[e]}))),C.createElement(ie,{rules:p}))},pe=({elements:e,type:t})=>C.createElement("ol",null,e.map((o,r)=>C.createElement(nt,{element:o,key:r,type:t})));n();import me from"react";import{styled as ce}from"@storybook/theming";var lt=ce.div({display:"flex",flexWrap:"wrap",margin:"12px 0"}),st=ce.div(({theme:e})=>({margin:"0 6px",padding:5,border:`1px solid ${e.appBorderColor}`,borderRadius:e.appBorderRadius})),de=({tags:e})=>me.createElement(lt,null,e.map(t=>me.createElement(st,{key:t},t)));var mt=M.div(({theme:e})=>({display:"flex",width:"100%",borderBottom:`1px solid ${e.appBorderColor}`,"&:hover":{background:e.background.hoverable}})),ct=M(pt)(({theme:e})=>({height:10,width:10,minWidth:10,color:e.color.mediumdark,marginRight:10,transition:"transform 0.1s ease-in-out",alignSelf:"center",display:"inline-flex"})),dt=M.div(({theme:e})=>({padding:e.layoutMargin,paddingLeft:e.layoutMargin-3,lineHeight:"20px",background:"none",color:"inherit",textAlign:"left",cursor:"pointer",borderLeft:"3px solid transparent",width:"100%","&:focus":{outline:"0 none",borderLeft:`3px solid ${e.color.secondary}`}})),gt=M.span({fontWeight:"normal",float:"right",marginRight:15,alignSelf:"center",input:{margin:0,display:"block"}}),ue=e=>{let[t,o]=at(!1),{item:r,type:l}=e,p=`${l}-${r.id}`;return h.createElement(ge,null,h.createElement(mt,null,h.createElement(dt,{onClick:()=>o(!t),role:"button"},h.createElement(ct,{icon:"arrowdown",color:"#9DA5AB",style:{transform:`rotate(${t?0:-90}deg)`}}),r.help),h.createElement(gt,null,h.createElement(S,{toggleId:p,elementsToHighlight:r.nodes}))),t?h.createElement(ge,null,h.createElement(re,{item:r,key:"info"}),h.createElement(pe,{elements:r.nodes,type:l,key:"elements"}),h.createElement(de,{tags:r.tags,key:"tags"})):null)};var w=({items:e,empty:t,type:o})=>j.createElement(ut,null,e&&e.length?e.map(r=>j.createElement(ue,{item:r,key:`${o}:${r.id}`,type:o})):j.createElement(ft,{key:"placeholder"},t));n();import*as f from"react";import{styled as E}from"@storybook/theming";import{SizeMe as ht}from"react-sizeme";var yt=E.div({width:"100%",position:"relative",minHeight:"100%"}),bt=E.label(({theme:e})=>({cursor:"pointer",userSelect:"none",color:e.color.dark})),xt=E.div(({elementWidth:e,theme:t})=>({cursor:"pointer",fontSize:13,lineHeight:"20px",padding:e>450?"10px 15px 10px 0":"10px 0px 10px 15px",height:"40px",border:"none",marginTop:e>450?-40:0,float:e>450?"right":"left",display:"flex",alignItems:"center",width:e>450?"auto":"100%",borderBottom:e>450?"none":`1px solid ${t.appBorderColor}`,input:{marginLeft:10,marginRight:0,marginTop:-1,marginBottom:0}})),Ct=E.button(({theme:e})=>({textDecoration:"none",padding:"10px 15px",cursor:"pointer",fontWeight:e.typography.weight.bold,fontSize:e.typography.size.s2-1,lineHeight:1,height:40,border:"none",borderTop:"3px solid transparent",borderBottom:"3px solid transparent",background:"transparent","&:focus":{outline:"0 none",borderBottom:`3px solid ${e.color.secondary}`}}),({active:e,theme:t})=>e?{opacity:1,borderBottom:`3px solid ${t.color.secondary}`}:{}),Tt=E.div({}),kt=E.div(({theme:e})=>({boxShadow:`${e.appBorderColor} 0 -1px 0 0 inset`,background:"rgba(0, 0, 0, .05)",display:"flex",justifyContent:"space-between",whiteSpace:"nowrap"}));function It(e){return e.reduce((t,o)=>t.concat(o.nodes),[])}var fe=({tabs:e})=>{let{tab:t,setTab:o}=I(),r=f.useCallback(m=>{o(parseInt(m.currentTarget.getAttribute("data-index")||"",10))},[o]),l=`${e[t].type}-global-checkbox`,p="Highlight results";return f.createElement(ht,{refreshMode:"debounce"},({size:m})=>f.createElement(yt,null,f.createElement(kt,null,f.createElement(Tt,null,e.map((y,u)=>f.createElement(Ct,{key:u,"data-index":u,active:t===u,onClick:r},y.label)))),e[t].items.length>0?f.createElement(xt,{elementWidth:m.width||0},f.createElement(bt,{htmlFor:l},p),f.createElement(S,{toggleId:l,elementsToHighlight:It(e[t].items)})):null,e[t].panel))};V();var ye=v(Et)({height:12,width:12,marginRight:4}),Pt=v(ye)(({theme:e})=>({animation:`${e.animation.rotate360} 1s linear infinite;`})),Nt=v.span(({theme:e})=>({color:e.color.positive})),Ht=v.span(({theme:e})=>({color:e.color.negative})),Ft=v.span(({theme:e})=>({color:e.color.warning})),D=v.span({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}),be=()=>{let{manual:e}=At("a11y",{manual:!1}),[t,o]=St(e?"manual":"initial"),[r,l]=i.useState(void 0),{setResults:p,results:m}=I(),{storyId:y}=Bt();i.useEffect(()=>{o(e?"manual":"initial")},[e]);let u=c=>{o("ran"),p(c),setTimeout(()=>{t==="ran"&&o("ready")},900)},R=J(()=>{o("running")},[]),O=J(c=>{o("error"),l(c)},[]),F=Rt({[x.RUNNING]:R,[x.RESULT]:u,[x.ERROR]:O}),b=J(()=>{o("running"),F(x.MANUAL,y)},[y]),W=X(()=>[{title:"Run test",onClick:b}],[b]),$=X(()=>[{title:t==="ready"?"Rerun tests":i.createElement(i.Fragment,null,i.createElement(ye,{inline:!0,icon:"check"})," Tests completed"),onClick:b}],[t,b]),A=X(()=>{let{passes:c,incomplete:B,violations:T}=m;return[{label:i.createElement(Ht,null,T.length," Violations"),panel:i.createElement(w,{items:T,type:0,empty:"No accessibility violations found."}),items:T,type:0},{label:i.createElement(Nt,null,c.length," Passes"),panel:i.createElement(w,{items:c,type:1,empty:"No accessibility checks passed."}),items:c,type:1},{label:i.createElement(Ft,null,B.length," Incomplete"),panel:i.createElement(w,{items:B,type:2,empty:"No accessibility checks incomplete."}),items:B,type:2}]},[m]);return i.createElement(i.Fragment,null,t==="initial"&&i.createElement(D,null,"Initializing..."),t==="manual"&&i.createElement(i.Fragment,null,i.createElement(D,null,"Manually run the accessibility scan."),i.createElement(he,{key:"actionbar",actionItems:W})),t==="running"&&i.createElement(D,null,i.createElement(Pt,{inline:!0,icon:"sync"})," Please wait while the accessibility scan is running ..."),(t==="ready"||t==="ran")&&i.createElement(i.Fragment,null,i.createElement(vt,{vertical:!0,horizontal:!0},i.createElement(fe,{key:"tabs",tabs:A})),i.createElement(he,{key:"actionbar",actionItems:$})),t==="error"&&i.createElement(D,null,"The accessibility scan encountered an error.",i.createElement("br",null),typeof r=="string"?r:JSON.stringify(r)))};Q.register(P,e=>{Q.add(G,{title:"",type:xe.TOOL,match:({viewMode:t})=>t==="story",render:()=>q.createElement(oe,null)}),Q.add(G,{title(){let t=e?.getAddonState(P),o=t?.violations?.length||0,r=t?.incomplete?.length||0,l=o+r;return l!==0?`Accessibility (${l})`:"Accessibility"},type:xe.PANEL,render:({active:t=!0,key:o})=>q.createElement(se,{key:o,active:t},q.createElement(be,null)),paramKey:Z})});
